## v4.1.0

## Search Engine Region Index Upgrade

We upgrade region index mapping version to `27` and upgrade region data to use ASGS 2021 and latest LGAs (2023) boundaries. During the upgrade, indexer will auto-recreate the region index. Depends on your database size, this might take some time.

To avoid serving incomplete region data during the re-indexing process, you can manually set the region index version that search API uses to the existing versions via [helm chart options](https://github.com/magda-io/magda/blob/944ae887842b98c51698d567435003be2e9dbefd/deploy/helm/internal-charts/search-api/values.yaml#L29).

e.g. you can set the following in your helm deployment values file / config:

```
search-api:
  regionsIndexVersion: 26
```

to make search api still queries the previous region index version (`26`) while indexer's creating the new indexes.

Once indexer fully completes the new region index creation / indexing, you can remove the above config from deployment config and deploy again to make search API uses the latest version index.

You can check the indexing progress via Indexer module logs.
